---
import BaseLayout from '@/layouts/BaseLayout.astro';
import HeaderWithDropdown from '@/components/layout/HeaderWithDropdown.astro';
import Footer from '@/components/layout/Footer.astro';
import Button from '@/components/ui/form/Button/Button.astro';
import Icon from '@/components/ui/primitives/Icon/Icon.astro';
import Card from '@/components/ui/data-display/Card/Card.astro';
import PixformanceLogo from '@/components/PixformanceLogo.astro';
import BreadcrumbTabs from '@/components/ui/navigation/BreadcrumbTabs.astro';

const tabs = [
  { label: 'PHYSIOTHERAPIE', href: '/physiotherapie' },
  { label: 'KLINIK', href: '/klinik' },
  { label: 'FITNESS', href: '/fitness' },
  { label: 'BGM', href: '/firmen-fitness' },
];

const stats = [
  { value: '750.000+', count: 750000, suffix: '+', label: 'Trainierende / Jahr', icon: 'users' },
  { value: '1100+', count: 1100, suffix: '+', label: 'Kliniken & Rehazentren', icon: 'globe' },
  { value: '600+', count: 600, suffix: '+', label: 'Funktionelle Übungen', icon: 'zap' },
];

const benefits = [
  {
    icon: 'users',
    title: 'Patientenaktivierung',
    description: 'Motivierende digitale Trainingsumgebung steigert die aktive Teilnahme der Patienten.',
    gradient: 'from-[#02308C] to-[#6BDBD1]',
  },
  {
    icon: 'heart',
    title: 'Personalentlastung',
    description: 'Therapeuten können sich auf komplexe Fälle konzentrieren, während Pixformance das Standardtraining übernimmt.',
    gradient: 'from-[#6BDBD1] to-[#02308C]',
  },
  {
    icon: 'trending-up',
    title: 'Skalierbarkeit',
    description: 'Bis zu 4 Patienten gleichzeitig betreuen bei gleichbleibender Betreuungsqualität.',
    gradient: 'from-[#02308C] to-[#6BDBD1]',
  },
  {
    icon: 'file-text',
    title: 'Dokumentation',
    description: 'Automatische Erfassung aller Trainingsdaten für lückenlose Dokumentation.',
    gradient: 'from-[#6BDBD1] to-[#86C9BC]',
  },
  {
    icon: 'check-circle',
    title: 'Therapietreue',
    description: 'Gamification-Elemente erhöhen die Motivation und damit die Therapietreue.',
    gradient: 'from-[#86C9BC] to-[#02308C]',
  },
  {
    icon: 'shield',
    title: 'Qualitätssicherung',
    description: 'Standardisierte Übungsausführung durch Echtzeit-Feedback sichert gleichbleibende Qualität.',
    gradient: 'from-[#02308C] to-[#6BDBD1]',
  },
];

const testimonials = [
  {
    name: 'Gabriele Buchstein',
    role: 'Leitende Physiotherapeutin',
    company: 'Sauerlandklinik Hachen',
    image: '/images/Gabriele-Buchstein-Leitung-Physiotherapie-Sauerlandklinik-Hachen.png',
    quote: 'Die Patienten sind begeistert und sehr motiviert. Es wird nicht langweilig, da die Übungen sehr abwechslungsreich sind und man sich steigern kann.',
  },
  {
    name: 'Christoph Schneider',
    role: 'Therapieleitung',
    company: 'Niederrhein-Klinik',
    image: '/images/Christoph-Schneider-Therapieleiter-Niederrheinklinik-Reha-Klinik-Korschenbroich-Pixformance.png',
    quote: 'Auf der Suche nach einer Möglichkeit, die Patienten zu aktivieren und gleichzeitig Personal zu entlasten, sind wir auf Pixformance gestoßen.',
  },
  {
    name: 'Christoph Oratsch',
    role: 'Leitung Therapie',
    company: 'AUVA Unfallkrankenhaus',
    image: '/images/Christoph-Oratsch-AUVA-Klagenfurt-1.png',
    quote: 'Von Patientenseite kommt ein großes Interesse gegenüber der Pixformance Stationen. Viele kommen von sich aus und wollen ein Trainingsprogramm.',
  },
];

const features = [
  {
    icon: 'eye',
    title: '2D Full-HD Kamera',
    description: 'Erfasst 25 Gelenkpunkte in Echtzeit für präzise Bewegungsanalyse',
  },
  {
    icon: 'monitor',
    title: 'Virtueller Trainer',
    description: 'Zeigt Übungen am 43" Display und gibt visuelles Feedback',
  },
  {
    icon: 'zap',
    title: 'Echtzeit-Korrektur',
    description: 'Sofortiges Feedback zur Bewegungsausführung während des Trainings',
  },
];
---

<BaseLayout title="Reha Sportgeräte für Rehakliniken - Pixformance">
  <HeaderWithDropdown slot="header" position="sticky">
    <PixformanceLogo slot="logo" />
  </HeaderWithDropdown>

  <!-- Breadcrumb Tabs -->
  <BreadcrumbTabs tabs={tabs} activeTab="/klinik" />

  <!-- Hero Section -->
  <section class="relative bg-white overflow-hidden py-12 md:py-20">
    <div class="container">
      <div class="max-w-5xl mx-auto text-center space-y-5">
        <div class="inline-block hero-animate" style="animation-delay: 0.1s;">
          <span class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-[#02308C]/10 border border-[#02308C]/20 text-sm font-bold text-[#02308C] hover:bg-[#02308C]/20 hover:border-[#02308C]/30 transition-all duration-300 cursor-pointer">
            <Icon name="zap" size="sm" />
            Innovatives, Reha Sportgerät für Klinik und Rehabilitation
          </span>
        </div>

        <h1 class="font-display text-4xl md:text-6xl font-bold text-[#02308C] hero-animate" style="animation-delay: 0.3s;">
          Aktivieren Sie Ihre Patienten und entlasten Sie Ihre Therapeuten.
        </h1>

        <p class="text-lg md:text-xl text-foreground-muted leading-relaxed max-w-3xl mx-auto hero-animate" style="animation-delay: 0.4s;">
          Die Pixformance Station ist ein innovatives Reha Sportgerät und bietet Patienten ein sicheres Training im Rahmen einer Bewegungstherapie – ganz individuell, je nach Indikation und Gesundheitszustand. Das Reha Sportgerät wurde entwickelt, um Patienten bei einer Reha-Therapie zu mehr Bewegung zu aktivieren und Therapeuten bei der Betreuung zu entlasten. 
        </p>

        <div class="flex flex-col sm:flex-row flex-wrap gap-4 justify-center pt-2 hero-animate" style="animation-delay: 0.5s;">
          <Button
            size="lg"
            href="/testen"
            class="group hover:shadow-lg hover:scale-105 transition-all duration-300"
          >
            Jetzt unverbindlich testen
            <Icon name="arrow-right" size="sm" class="group-hover:translate-x-2 transition-transform duration-300" />
          </Button>
          <Button
            size="lg"
            variant="outline"
            href="/konzept"
            class="group hover:shadow-lg hover:scale-105 transition-all duration-300"
          >
            Beratung anfragen
            <Icon name="phone" size="sm" class="group-hover:scale-110 transition-transform duration-300" />
          </Button>
        </div>

        <!-- Stats -->
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 pt-6 max-w-4xl mx-auto">
          {stats.map((stat, index) => (
            <div class="group space-y-2 p-4 sm:p-6 rounded-2xl hover:bg-[#02308C]/5 transition-all duration-300 hover:scale-105 cursor-pointer hero-animate" style={`animation-delay: ${0.6 + index * 0.1}s;`}>
              <div
                class="text-3xl md:text-4xl font-bold text-[#02308C] group-hover:scale-110 transition-transform duration-300 stat-counter"
                data-count={stat.count}
                data-suffix={stat.suffix}
                data-large={stat.count >= 10000 ? 'true' : 'false'}
              >
                {stat.value}
              </div>
              <div class="text-xs sm:text-sm text-foreground-muted">{stat.label}</div>
            </div>
          ))}
        </div>
      </div>
    </div>
  </section>

  <!-- Features Grid -->
  <section class="py-12 md:py-20 bg-gray-50">
    <div class="container">
      <div class="text-center mb-8" data-scroll="fade-up">
        <span class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-[#02308C]/10 border border-[#02308C]/20 text-sm font-bold text-[#02308C] mb-6">
          <Icon name="layers" size="sm" />
          Voll vernetztes System
        </span>
        <h2 class="font-display text-4xl md:text-5xl font-bold">
          Die Pixformance Station
        </h2>
        <p class="text-lg text-foreground-muted mt-4 max-w-3xl mx-auto">
          Modernste Bewegungsanalyse verbindet sich mit therapeutischer Expertise
        </p>
      </div>

      <div class="grid md:grid-cols-3 gap-6">
        {features.map((feature, index) => (
          <Card
            variant="elevated"
            padding="lg"
            class="hover:shadow-xl transition-all duration-500 hover:-translate-y-2 group bg-white"
            data-scroll="scale"
            data-delay={index + 1}
          >
            <div class="w-16 h-16 rounded-xl bg-[#02308C] flex items-center justify-center mb-4 group-hover:scale-110 group-hover:rotate-6 transition-all duration-500">
              <Icon name={feature.icon} size="lg" class="text-white" />
            </div>
            <h3 class="font-bold text-xl mb-2 group-hover:text-[#02308C] transition-colors">
              {feature.title}
            </h3>
            <p class="text-sm text-foreground-muted">
              {feature.description}
            </p>
          </Card>
        ))}
      </div>
    </div>
  </section>

  <!-- Benefits Section -->
  <section class="py-12 md:py-20 bg-white">
    <div class="container">
      <div class="text-center mb-8" data-scroll="fade-up">
        <span class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-[#02308C]/10 border border-[#02308C]/20 text-sm font-bold text-[#02308C] mb-6">
          <Icon name="star" size="sm" />
          Vorteile
        </span>
        <h2 class="font-display text-4xl md:text-5xl font-bold mb-4">
          Vorteile für Ihre Klinik
        </h2>
      </div>

      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        {benefits.map((benefit, index) => (
          <Card
            variant="elevated"
            padding="lg"
            class="hover:shadow-xl transition-all duration-500 hover:-translate-y-2 group bg-white"
            data-scroll="fade-up"
            data-delay={index + 1}
          >
            <div class={`w-12 h-12 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 group-hover:rotate-6 transition-all duration-500 ${index % 2 === 0 ? 'bg-[#02308C]' : 'bg-[#6BDBD1]'}`}>
              <Icon name={benefit.icon} size="md" class="text-white" />
            </div>
            <h3 class="font-bold text-lg mb-2 group-hover:text-[#02308C] transition-colors">
              {benefit.title}
            </h3>
            <p class="text-sm text-foreground-muted">
              {benefit.description}
            </p>
          </Card>
        ))}
      </div>
    </div>
  </section>

  <!-- Testimonials Section -->
  <section class="py-12 md:py-20 bg-gray-50">
    <div class="container">
      <div class="text-center mb-8" data-scroll="fade-up">
        <span class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-[#02308C]/10 border border-[#02308C]/20 text-sm font-bold text-[#02308C] mb-6">
          <Icon name="check-circle" size="sm" />
          Erfolgsgeschichten
        </span>
        <h2 class="font-display text-4xl md:text-5xl font-bold">
          Was unsere Partner sagen
        </h2>
        <p class="text-lg text-foreground-muted mt-4">
          Erfahren Sie, wie Kliniken mit Pixformance ihre Therapie revolutionieren
        </p>
      </div>

      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        {testimonials.map((testimonial, index) => (
          <Card
            variant="elevated"
            padding="lg"
            class="bg-white hover:shadow-2xl transition-all duration-500 hover:-translate-y-3 group relative overflow-hidden"
            data-scroll="scale"
            data-delay={index + 1}
          >
            <div class="absolute inset-0 bg-gradient-to-br from-[#02308C]/0 to-[#6BDBD1]/0 group-hover:from-[#02308C]/5 group-hover:to-[#6BDBD1]/5 transition-all duration-500"></div>

            <div class="relative space-y-4">
              <div class="flex items-center gap-3">
                <div class="relative">
                  <div class="absolute inset-0 bg-[#02308C] rounded-full blur-lg opacity-0 group-hover:opacity-60 transition-opacity duration-500"></div>
                  <img
                    src={testimonial.image}
                    alt={testimonial.name}
                    class="relative w-16 h-16 rounded-full object-cover ring-2 ring-white shadow-lg group-hover:scale-110 group-hover:rotate-3 transition-all duration-500"
                    loading="lazy"
                  />
                </div>
                <div>
                  <div class="font-bold group-hover:text-[#02308C] transition-colors duration-300">{testimonial.name}</div>
                  <div class="text-sm text-foreground-muted">{testimonial.role}</div>
                  <div class="text-sm text-[#02308C] font-semibold">{testimonial.company}</div>
                </div>
              </div>

              <div class="relative">
                <p class="text-sm text-foreground-muted italic leading-relaxed border-l-2 border-[#6BDBD1] pl-4">
                  "{testimonial.quote}"
                </p>
              </div>
            </div>
          </Card>
        ))}
      </div>
    </div>
  </section>

  <!-- CTA Section -->
  <section class="py-12 md:py-20 relative overflow-hidden">
    <div class="absolute inset-0" style="background: linear-gradient(to bottom, #6BDBD1 80%, white 100%)"></div>

    <div class="container relative">
      <div class="max-w-4xl mx-auto text-center space-y-8" data-scroll="fade-up">
        <h2 class="font-display text-4xl md:text-6xl font-bold text-white leading-tight">
          Bereit für die digitale Transformation?
        </h2>

        <p class="text-xl text-white/90 max-w-2xl mx-auto">
          Vereinbaren Sie jetzt einen unverbindlichen Beratungstermin und erfahren Sie, wie Pixformance Ihre Therapie revolutionieren kann.
        </p>

        <div class="flex flex-wrap gap-4 justify-center pt-4">
          <Button
            size="lg"
            href="/testen"
            class="bg-black text-white hover:bg-black/80"
          >
            Jetzt kostenlos testen
            <Icon name="arrow-right" size="sm" />
          </Button>
          <Button
            size="lg"
            variant="outline"
            href="/konzept"
            class="border-2 border-black text-black hover:bg-black hover:text-white"
          >
            Mehr erfahren
          </Button>
        </div>
      </div>
    </div>
  </section>

  <Footer slot="footer" />
</BaseLayout>

<style>
  /* Hero Entry Animation */
  @keyframes hero-entry {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .hero-animate {
    opacity: 0;
    animation: hero-entry 0.8s ease-out forwards;
  }

  /* Scroll Animation Styles */
  [data-scroll] {
    opacity: 0;
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  }

  [data-scroll].is-visible {
    opacity: 1;
  }

  [data-scroll="fade-up"] {
    transform: translateY(30px);
  }

  [data-scroll="fade-up"].is-visible {
    transform: translateY(0);
  }

  [data-scroll="scale"] {
    transform: scale(0.9);
  }

  [data-scroll="scale"].is-visible {
    transform: scale(1);
  }

  /* Stagger delays */
  [data-scroll][data-delay="1"] {
    transition-delay: 0.1s;
  }

  [data-scroll][data-delay="2"] {
    transition-delay: 0.2s;
  }

  [data-scroll][data-delay="3"] {
    transition-delay: 0.3s;
  }

  [data-scroll][data-delay="4"] {
    transition-delay: 0.4s;
  }

  [data-scroll][data-delay="5"] {
    transition-delay: 0.5s;
  }

  [data-scroll][data-delay="6"] {
    transition-delay: 0.6s;
  }
</style>

<script>
  // Intersection Observer for scroll animations
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add('is-visible');
      }
    });
  }, observerOptions);

  document.querySelectorAll('[data-scroll]').forEach((el) => {
    observer.observe(el);
  });

  // Counter animation for stats
  function animateCounter(el: HTMLElement) {
    const target = parseInt(el.dataset.count || '0', 10);
    const suffix = el.dataset.suffix || '';
    const isLarge = el.dataset.large === 'true';
    const duration = 1800;
    const start = performance.now();

    function formatNumber(n: number): string {
      if (isLarge) {
        return n.toLocaleString('de-DE');
      }
      return n.toString();
    }

    function tick(now: number) {
      const elapsed = now - start;
      const progress = Math.min(elapsed / duration, 1);
      // Ease out cubic
      const eased = 1 - Math.pow(1 - progress, 3);
      const current = Math.round(eased * target);
      el.textContent = formatNumber(current) + suffix;
      if (progress < 1) {
        requestAnimationFrame(tick);
      }
    }

    requestAnimationFrame(tick);
  }

  const counterObserver = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        animateCounter(entry.target as HTMLElement);
        counterObserver.unobserve(entry.target);
      }
    });
  }, { threshold: 0.5 });

  document.querySelectorAll('.stat-counter').forEach((el) => {
    counterObserver.observe(el);
  });
</script>
